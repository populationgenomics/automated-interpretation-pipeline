# PanelApp

PanelApp is a crowd-sourced gene curation knowledge base, aggregating information on gene-disease associations from a
wide range of specialists. Within PanelApp there are a number of panels, each containing a set of genes associated with
a disease, or a theme. Within a panel genes are rated using a traffic light system:

* Red (minimal evidence)
* Orange (intermediate evidence)
* Green (strong evidence linking gene to theme)

For this project, we will focus analysis on a specific list of genes associated strongly with mendelian disease, with an
option to supplement this gene list with any number of additional PanelApp entries. The Gene list we will use as the
core of the analysis deafults to the [Mendeliome](https://panelapp.agha.umccr.org/panels/137/), though this can be
altered through the configuration file.

During an analysis run, the [Query Script](../reanalysis/query_panelapp.py) is used to pull down the latest core panel
data (gene ENSG, symbol, and Mode of Inheritance), saved as a dictionary indexed on GRCh38/Ensembl 90 ENSG.

## Per-participant Panels

TODO PUT SOMETHING HERE

The alternative to suggesting a list of Panel IDs is to provide a JSON file, containing a list of panels to apply to
each individual within the dataset. This can be generated by hand, or using the [HPO-Panel Helper](../helpers/hpo_panel_matching.py).

If this is used as an input, the following steps are followed:

1. Loop over all participants to obtain all unique panel IDs
2. Use these unique panels in same logic as when a list of panels is supplied (above)
3. At each step, when the panel is queried, save the list of Gene IDs into a separate dictionary

The end result of the process will be two dictionaries (JSON):

1. The same object as we always generate, following the Additional Panels logic
2. A second lookup, where we have the list of ENSG gene IDs associated with each panel ID, e.g.

```json
{
    "default": [
        "ENSG1",
        "ENSG7"
    ],
    "panel_1": [
        "ENSG1",
        "ENSG2"
    ]
}
```

(where the 'default' key represents the core (Mendeliome) content)

## New Genes

Once all required panels are merged in, the final [optional] step is to check for 'new' genes. This can be done by
providing a gene list; a JSON file containing a single list of Strings. Each gene's entry will be annotated with
`new=True` if the PanelApp gene doesn't appear in the provided gene list, otherwise `new` remains at the default value
which is False.
